# This is a basic workflow to help you get started with Actions
name: âš™ï¸ CI
env:
  FORCE_COLOR: true

on:
  pull_request:
    branches:
      - main
  push:
    branches:
      - main
  workflow_dispatch:
  merge_group:

jobs:
  proto-checks:
    name: ğŸ—ƒï¸ Proto
    uses: ./.github/workflows/proto-checks.yaml
    permissions:
      contents: read
      pull-requests: write

  client-checks:
    needs:
      - proto-checks
    name: ğŸ–¼ï¸ Client
    uses: ./.github/workflows/client-checks.yaml

  server-checks:
    needs:
      - proto-checks
    name: ğŸ—„ï¸ Server
    uses: ./.github/workflows/server-checks.yaml

  docker-checks:
    needs:
      - proto-checks
    name: ğŸ³ Docker
    uses: ./.github/workflows/docker-checks.yaml

  integration-tests:
    needs:
      - docker-checks
      - proto-checks
    name: ğŸ­ Integration tests
    uses: ./.github/workflows/integration-tests.yaml
